SET(COMMONLIB_SOURCES "")
SET(COMMONLIB_DEFINITIONS "")
SET(COMMONLIB_INCLUDE_DIR "")
SET(COMMONLIB_LIBRARIES "")

SET(COMMONLIB_STRING_CHAR "UTF32" CACHE STRING "The internal string char type. Possible values are: UTF32 and UTF16")

LIST(APPEND COMMONLIB_SOURCES "CMakeListsCommonLib.txt")
SOURCE_GROUP("CommonLibMisc" FILES "CMakeListsCommonLib.txt")

#-- Files
SET(COMMONLIB_ROOT_SOURCES
	${COMMONLIB_SRC_DIR}/CommonLib.hpp
	${COMMONLIB_SRC_DIR}/Internal.hpp
)
LIST(APPEND COMMONLIB_SOURCES ${COMMONLIB_ROOT_SOURCES})
SOURCE_GROUP("CommonLibSrc" FILES ${COMMONLIB_ROOT_SOURCES})

SET(COMMONLIB_THIRDPARTY_SOURCES
	${COMMONLIB_SRC_DIR}/3rdParty/FastDelegate/FastDelegate.h
	${COMMONLIB_SRC_DIR}/3rdParty/FastDelegate/FastDelegateBind.h
)
LIST(APPEND COMMONLIB_SOURCES ${COMMONLIB_THIRDPARTY_SOURCES})
SOURCE_GROUP("CommonLibSrc\\3rdParty" FILES ${COMMONLIB_THIRDPARTY_SOURCES})

SET(COMMONLIB_ALGORITHMS_SOURCES
	${COMMONLIB_SRC_DIR}/Algorithms/Copy.hpp
	${COMMONLIB_SRC_DIR}/Algorithms/Find.hpp
	${COMMONLIB_SRC_DIR}/Algorithms/QuickSort.hpp
	${COMMONLIB_SRC_DIR}/Algorithms/Swap.hpp
)
LIST(APPEND COMMONLIB_SOURCES ${COMMONLIB_ALGORITHMS_SOURCES})
SOURCE_GROUP("CommonLibSrc\\Algorithms" FILES ${COMMONLIB_ALGORITHMS_SOURCES})

SET(COMMONLIB_CONTAINERS_SOURCES
	${COMMONLIB_SRC_DIR}/Containers/CBinaryMap.hpp
	${COMMONLIB_SRC_DIR}/Containers/CHashMap.hpp
	${COMMONLIB_SRC_DIR}/Containers/LinkedList.hpp
	${COMMONLIB_SRC_DIR}/Containers/CQueue.hpp
	${COMMONLIB_SRC_DIR}/Containers/CSet.hpp
	${COMMONLIB_SRC_DIR}/Containers/SinglyLinkedList.hpp
	${COMMONLIB_SRC_DIR}/Containers/Vector.hpp
	${COMMONLIB_SRC_DIR}/Containers/ISerializable.hpp
)
LIST(APPEND COMMONLIB_SOURCES ${COMMONLIB_CONTAINERS_SOURCES})
SOURCE_GROUP("CommonLibSrc\\Containers" FILES ${COMMONLIB_CONTAINERS_SOURCES})

SET(COMMONLIB_ERRORS_SOURCES
	${COMMONLIB_SRC_DIR}/Errors/Assert.cpp
	${COMMONLIB_SRC_DIR}/Errors/Assert.hpp
	${COMMONLIB_SRC_DIR}/Errors/CErrorStack.cpp
	${COMMONLIB_SRC_DIR}/Errors/CErrorStack.hpp
)
LIST(APPEND COMMONLIB_SOURCES ${COMMONLIB_ERRORS_SOURCES})
SOURCE_GROUP("CommonLibSrc\\Errors" FILES ${COMMONLIB_ERRORS_SOURCES})

SET(COMMONLIB_MATH_SOURCES
	${COMMONLIB_SRC_DIR}/Math/CMathOperations.hpp
	${COMMONLIB_SRC_DIR}/Math/CMatrix4x4.cpp
	${COMMONLIB_SRC_DIR}/Math/CMatrix4x4.hpp
	${COMMONLIB_SRC_DIR}/Math/CQuaternion.cpp
	${COMMONLIB_SRC_DIR}/Math/CQuaternion.hpp
	${COMMONLIB_SRC_DIR}/Math/CVector2D.cpp
	${COMMONLIB_SRC_DIR}/Math/CVector2D.hpp
	${COMMONLIB_SRC_DIR}/Math/CVector3D.cpp
	${COMMONLIB_SRC_DIR}/Math/CVector3D.hpp
	${COMMONLIB_SRC_DIR}/Math/CVector4D.cpp
	${COMMONLIB_SRC_DIR}/Math/CVector4D.hpp
)
LIST(APPEND COMMONLIB_SOURCES ${COMMONLIB_MATH_SOURCES})
SOURCE_GROUP("CommonLibSrc\\Math" FILES ${COMMONLIB_MATH_SOURCES})

SET(COMMONLIB_MEMORY_SOURCES
	${COMMONLIB_SRC_DIR}/Memory/CDefaultAllocator.hpp
	${COMMONLIB_SRC_DIR}/Memory/new.hpp
)
LIST(APPEND COMMONLIB_SOURCES ${COMMONLIB_MEMORY_SOURCES})
SOURCE_GROUP("CommonLibSrc\\Memory" FILES ${COMMONLIB_MEMORY_SOURCES})

SET(COMMONLIB_RANGES_SOURCES
	${COMMONLIB_SRC_DIR}/Ranges/CMemoryRange.hpp
	${COMMONLIB_SRC_DIR}/Ranges/RangeTemplate.hpp
)
LIST(APPEND COMMONLIB_SOURCES ${COMMONLIB_RANGES_SOURCES})
SOURCE_GROUP("CommonLibSrc\\Ranges" FILES ${COMMONLIB_RANGES_SOURCES})

SET(COMMONLIB_SMARTPOINTERS_SOURCES
	${COMMONLIB_SRC_DIR}/SmartPointers/CDeleteArrayPolicy.hpp
	${COMMONLIB_SRC_DIR}/SmartPointers/CDeletePolicy.hpp
	${COMMONLIB_SRC_DIR}/SmartPointers/CSharedPtr.hpp
)
LIST(APPEND COMMONLIB_SOURCES ${COMMONLIB_SMARTPOINTERS_SOURCES})
SOURCE_GROUP("CommonLibSrc\\SmartPointers" FILES ${COMMONLIB_SMARTPOINTERS_SOURCES})

SET(COMMONLIB_STREAMS_SOURCES
	${COMMONLIB_SRC_DIR}/Streams/CInputOutputStream.hpp
	${COMMONLIB_SRC_DIR}/Streams/CInputStream.hpp
	${COMMONLIB_SRC_DIR}/Streams/COutputStream.cpp
	${COMMONLIB_SRC_DIR}/Streams/COutputStream.hpp
	${COMMONLIB_SRC_DIR}/Streams/CStreamBase.cpp
	${COMMONLIB_SRC_DIR}/Streams/CStreamBase.hpp
)
LIST(APPEND COMMONLIB_SOURCES ${COMMONLIB_STREAMS_SOURCES})
SOURCE_GROUP("CommonLibSrc\\Streams" FILES ${COMMONLIB_STREAMS_SOURCES})

SET(COMMONLIB_STRINGS_SOURCES
	${COMMONLIB_SRC_DIR}/Strings/CFormat.cpp
	${COMMONLIB_SRC_DIR}/Strings/CFormat.hpp
	${COMMONLIB_SRC_DIR}/Strings/CString.cpp
	${COMMONLIB_SRC_DIR}/Strings/CString.hpp
	${COMMONLIB_SRC_DIR}/Strings/CStringBase.hpp
	${COMMONLIB_SRC_DIR}/Strings/CStringBuffer.cpp
	${COMMONLIB_SRC_DIR}/Strings/CStringBuffer.hpp
	${COMMONLIB_SRC_DIR}/Strings/CStringIterator.cpp
	${COMMONLIB_SRC_DIR}/Strings/CStringIterator.hpp
	${COMMONLIB_SRC_DIR}/Strings/CStringStatic.cpp
	${COMMONLIB_SRC_DIR}/Strings/CStringStatic.hpp
	${COMMONLIB_SRC_DIR}/Strings/CStringUTF8.cpp
	${COMMONLIB_SRC_DIR}/Strings/CStringUTF8.hpp
	${COMMONLIB_SRC_DIR}/Strings/CStringUTF16.cpp
	${COMMONLIB_SRC_DIR}/Strings/CStringUTF16.hpp
	${COMMONLIB_SRC_DIR}/Strings/CStringUTF32.cpp
	${COMMONLIB_SRC_DIR}/Strings/CStringUTF32.hpp
	${COMMONLIB_SRC_DIR}/Strings/CUTFConvert.cpp
	${COMMONLIB_SRC_DIR}/Strings/CUTFConvert.hpp
	${COMMONLIB_SRC_DIR}/Strings/TCharTypes.hpp
)
LIST(APPEND COMMONLIB_SOURCES ${COMMONLIB_STRINGS_SOURCES})
SOURCE_GROUP("CommonLibSrc\\Strings" FILES ${COMMONLIB_STRINGS_SOURCES})
#-- End of files

LIST(APPEND COMMONLIB_DEFINITIONS ${COMMON_DEFINITIONS})
LIST(APPEND COMMONLIB_DEFINITIONS "COMMONLIB_STRING_CHAR=${COMMONLIB_STRING_CHAR}")
INCLUDE_DIRECTORIES(${COMMONLIB_INCLUDE_DIR})
LINK_DIRECTORIES(${COMMONLIB_LIBRARIES})

ADD_LIBRARY(${COMMONLIB_NAME} SHARED ${COMMONLIB_SOURCES})
SET_PROPERTY(TARGET ${COMMONLIB_NAME} PROPERTY COMPILE_DEFINITIONS ${COMMONLIB_DEFINITIONS})
TARGET_LINK_LIBRARIES(${COMMONLIB_NAME} ${COMMONLIB_LIBRARIES})

# EOF
